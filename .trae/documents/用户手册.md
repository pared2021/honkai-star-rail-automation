# 崩坏星穹铁道自动化助手 - 用户手册

## 目录

1. [快速开始](#快速开始)
2. [界面介绍](#界面介绍)
3. [功能使用](#功能使用)
4. [配置说明](#配置说明)
5. [常见操作](#常见操作)
6. [故障排除](#故障排除)

## 快速开始

### 系统要求

- **操作系统**: Windows 10/11 (64位)
- **Python版本**: Python 3.9 或更高版本
- **内存**: 至少 4GB RAM
- **显示器**: 推荐 1920x1080 分辨率
- **游戏**: 崩坏星穹铁道客户端

### 首次启动

1. **启动程序**
   ```bash
   python main.py
   ```

2. **初始化设置**
   - 程序首次启动时会自动创建必要的目录和数据库
   - 系统会提示进行基本配置

3. **游戏检测**
   - 确保崩坏星穹铁道游戏已安装并可正常运行
   - 程序会自动检测游戏窗口

## 界面介绍

### 主窗口布局

主界面采用标签页设计，包含以下几个主要区域：

#### 1. 任务管理标签页
- **任务列表**: 显示所有创建的自动化任务
- **任务状态**: 实时显示任务执行状态
- **控制按钮**: 开始、暂停、停止任务的操作按钮

#### 2. 游戏设置标签页
- **游戏路径**: 设置游戏安装目录
- **分辨率设置**: 配置游戏运行分辨率
- **窗口检测**: 自动检测和定位游戏窗口

#### 3. 自动化配置标签页
- **操作参数**: 设置操作延迟、检测阈值等
- **安全选项**: 配置安全模式和随机延迟
- **高级设置**: 调试模式、性能优化等

#### 4. 执行日志标签页
- **实时日志**: 显示程序运行日志
- **操作记录**: 记录所有自动化操作
- **错误信息**: 显示错误和警告信息

### 状态栏

底部状态栏显示：
- 程序运行状态
- 当前任务信息
- 游戏连接状态
- 系统资源使用情况

## 功能使用

### 创建自动化任务

1. **进入任务管理**
   - 点击"任务管理"标签页
   - 点击"新建任务"按钮

2. **配置任务参数**
   - **任务名称**: 为任务设置一个描述性名称
   - **任务类型**: 选择要执行的自动化类型
     - 日常任务自动化
     - 副本挑战自动化
     - 材料收集自动化
     - 邮件收取自动化
   - **执行条件**: 设置任务触发条件
   - **重复设置**: 配置任务重复执行规则

3. **保存任务**
   - 检查配置无误后点击"保存"按钮
   - 任务将出现在任务列表中

### 执行自动化任务

1. **准备工作**
   - 确保游戏已启动并处于主界面
   - 检查游戏窗口是否被正确检测
   - 确认自动化配置正确

2. **启动任务**
   - 在任务列表中选择要执行的任务
   - 点击"开始"按钮启动任务
   - 观察执行日志确认任务正常运行

3. **监控执行**
   - 通过执行日志标签页监控任务进度
   - 注意观察任务状态变化
   - 如有异常及时停止任务

### 游戏界面识别

程序使用模板匹配技术识别游戏界面元素：

1. **模板管理**
   - 模板文件存储在 `assets/templates/` 目录
   - 支持添加自定义模板
   - 可调整识别阈值提高准确性

2. **识别调试**
   - 启用调试模式查看识别过程
   - 使用截图功能验证识别结果
   - 根据识别效果调整参数

## 配置说明

### 游戏设置配置

#### 基本设置
- **游戏路径**: 指向游戏可执行文件的完整路径
- **游戏分辨率**: 设置游戏运行的分辨率（推荐1920x1080）
- **全屏模式**: 选择游戏是否以全屏模式运行

#### 窗口检测
- **自动检测**: 启用后程序会自动查找游戏窗口
- **手动指定**: 可手动指定游戏窗口的位置和大小
- **检测间隔**: 设置窗口检测的时间间隔

### 自动化参数配置

#### 操作延迟
- **基础延迟**: 操作之间的基本等待时间（推荐500-1000ms）
- **随机延迟**: 在基础延迟基础上添加随机时间
- **长延迟**: 用于等待界面加载的延迟时间

#### 检测参数
- **匹配阈值**: 模板匹配的相似度阈值（0.7-0.9）
- **重试次数**: 识别失败时的重试次数
- **超时时间**: 单次操作的最大等待时间

#### 安全设置
- **安全模式**: 启用后会进行额外的安全检查
- **异常处理**: 遇到异常时的处理策略
- **紧急停止**: 设置紧急停止的快捷键

### 高级配置

#### 性能优化
- **CPU限制**: 限制程序CPU使用率
- **内存限制**: 设置最大内存使用量
- **并发控制**: 控制同时执行的任务数量

#### 调试选项
- **详细日志**: 启用详细的调试日志
- **截图保存**: 自动保存操作截图
- **性能监控**: 监控程序性能指标

## 常见操作

### 任务管理操作

#### 创建任务
1. 点击"新建任务"按钮
2. 填写任务基本信息
3. 配置执行参数
4. 保存任务

#### 编辑任务
1. 在任务列表中选择任务
2. 点击"编辑"按钮
3. 修改任务配置
4. 保存更改

#### 删除任务
1. 选择要删除的任务
2. 点击"删除"按钮
3. 确认删除操作

### 日志查看操作

#### 实时日志
- 在"执行日志"标签页查看实时日志
- 使用过滤功能筛选特定类型的日志
- 可以暂停日志滚动进行详细查看

#### 历史日志
- 日志文件保存在 `logs/` 目录
- 可以使用文本编辑器查看历史日志
- 支持按日期查找特定时间的日志

### 配置备份与恢复

#### 备份配置
1. 进入"设置"菜单
2. 选择"导出配置"
3. 选择保存位置
4. 确认导出

#### 恢复配置
1. 进入"设置"菜单
2. 选择"导入配置"
3. 选择配置文件
4. 确认导入并重启程序

## 故障排除

### 常见问题

#### 程序无法启动
**可能原因**:
- Python环境问题
- 依赖包缺失
- 权限不足

**解决方法**:
1. 检查Python版本是否符合要求
2. 重新安装依赖包: `pip install -r requirements.txt`
3. 以管理员权限运行程序

#### 游戏窗口检测失败
**可能原因**:
- 游戏未启动
- 游戏窗口被遮挡
- 分辨率设置错误

**解决方法**:
1. 确保游戏正常启动
2. 将游戏窗口置于前台
3. 检查并调整分辨率设置
4. 尝试手动指定窗口位置

#### 自动化操作失败
**可能原因**:
- 模板匹配失败
- 游戏界面变化
- 网络延迟

**解决方法**:
1. 调整匹配阈值
2. 更新模板文件
3. 增加操作延迟
4. 检查网络连接

#### 程序运行缓慢
**可能原因**:
- 系统资源不足
- 配置参数不当
- 后台程序干扰

**解决方法**:
1. 关闭不必要的后台程序
2. 调整性能配置参数
3. 增加系统内存
4. 优化游戏设置

### 错误代码说明

| 错误代码 | 说明 | 解决方法 |
|---------|------|----------|
| E001 | 游戏窗口未找到 | 检查游戏是否启动 |
| E002 | 模板匹配失败 | 调整匹配阈值或更新模板 |
| E003 | 操作超时 | 增加超时时间或检查网络 |
| E004 | 权限不足 | 以管理员权限运行 |
| E005 | 配置文件错误 | 检查配置文件格式 |

### 获取帮助

如果遇到无法解决的问题，可以通过以下方式获取帮助：

1. **查看日志**: 详细的错误信息通常记录在日志文件中
2. **检查文档**: 查阅项目文档和FAQ
3. **社区支持**: 在项目社区提问
4. **提交问题**: 在项目仓库提交Issue

### 性能优化建议

1. **系统优化**
   - 关闭不必要的后台程序
   - 确保有足够的可用内存
   - 使用SSD硬盘提高读写速度

2. **程序配置**
   - 根据系统性能调整并发数量
   - 合理设置操作延迟
   - 启用性能监控功能

3. **游戏设置**
   - 使用推荐的游戏分辨率
   - 关闭游戏中不必要的特效
   - 确保游戏运行稳定

---

**注意**: 本程序仅供学习和研究使用，请遵守游戏服务条款，合理使用自动化功能。