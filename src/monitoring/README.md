# ç›‘æ§ç³»ç»Ÿ (Monitoring System)

## æ¦‚è¿°

ç›‘æ§ç³»ç»Ÿæ˜¯æ˜Ÿé“åŠ©æ‰‹çš„æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€ï¼Œæä¾›å…¨é¢çš„ç³»ç»Ÿç›‘æ§ã€æ—¥å¿—è®°å½•ã€å‘Šè­¦ç®¡ç†ã€å¥åº·æ£€æŸ¥å’Œæ€§èƒ½ä¼˜åŒ–åŠŸèƒ½ã€‚è¯¥ç³»ç»Ÿé‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œæ”¯æŒå®æ—¶ç›‘æ§ã€è‡ªåŠ¨å‘Šè­¦ã€æ•°æ®å¯è§†åŒ–å’Œæ™ºèƒ½ä¼˜åŒ–ã€‚

## æ ¸å¿ƒåŠŸèƒ½

### ğŸ” å®æ—¶ç›‘æ§
- **ç³»ç»ŸæŒ‡æ ‡ç›‘æ§**: CPUã€å†…å­˜ã€ç£ç›˜ä½¿ç”¨ç‡
- **åº”ç”¨æ€§èƒ½ç›‘æ§**: å“åº”æ—¶é—´ã€ååé‡ã€é”™è¯¯ç‡
- **ä»»åŠ¡æ‰§è¡Œç›‘æ§**: ä»»åŠ¡çŠ¶æ€ã€æ‰§è¡Œæ—¶é—´ã€æˆåŠŸç‡
- **æ¸¸æˆæ£€æµ‹ç›‘æ§**: æ¸¸æˆçŠ¶æ€ã€çª—å£æ£€æµ‹ã€è‡ªåŠ¨åŒ–æ“ä½œ

### ğŸ“Š æ—¥å¿—ç®¡ç†
- **å¤šçº§åˆ«æ—¥å¿—**: DEBUGã€INFOã€WARNINGã€ERRORã€CRITICAL
- **ç»“æ„åŒ–æ—¥å¿—**: JSONæ ¼å¼ï¼Œæ”¯æŒå­—æ®µæœç´¢å’Œè¿‡æ»¤
- **æ—¥å¿—è½®è½¬**: è‡ªåŠ¨å‹ç¼©å’Œæ¸…ç†å†å²æ—¥å¿—
- **å®æ—¶æ—¥å¿—æµ**: æ”¯æŒå®æ—¶æ—¥å¿—æŸ¥çœ‹å’Œç›‘æ§

### ğŸš¨ æ™ºèƒ½å‘Šè­¦
- **è§„åˆ™å¼•æ“**: çµæ´»çš„å‘Šè­¦è§„åˆ™é…ç½®
- **å¤šé€šé“é€šçŸ¥**: æ¡Œé¢é€šçŸ¥ã€é‚®ä»¶ã€Webhookã€çŸ­ä¿¡
- **å‘Šè­¦èšåˆ**: é˜²æ­¢å‘Šè­¦é£æš´ï¼Œæ™ºèƒ½åˆ†ç»„
- **å‘Šè­¦æŠ‘åˆ¶**: é¿å…é‡å¤å‘Šè­¦ï¼Œæ”¯æŒå†·å´æ—¶é—´

### ğŸ¥ å¥åº·æ£€æŸ¥
- **ç»„ä»¶å¥åº·**: æ•°æ®åº“ã€æ–‡ä»¶ç³»ç»Ÿã€è¿›ç¨‹çŠ¶æ€
- **è‡ªåŠ¨æ¢å¤**: æ£€æµ‹åˆ°é—®é¢˜æ—¶è‡ªåŠ¨å°è¯•æ¢å¤
- **å¥åº·æŠ¥å‘Š**: ç”Ÿæˆè¯¦ç»†çš„å¥åº·çŠ¶æ€æŠ¥å‘Š
- **é¢„é˜²æ€§ç»´æŠ¤**: æå‰å‘ç°æ½œåœ¨é—®é¢˜

### ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–
- **è‡ªåŠ¨ä¼˜åŒ–**: æ ¹æ®ç³»ç»Ÿè´Ÿè½½è‡ªåŠ¨è°ƒæ•´å‚æ•°
- **ç¼“å­˜ç®¡ç†**: æ™ºèƒ½ç¼“å­˜ç­–ç•¥å’Œæ¸…ç†
- **èµ„æºç›‘æ§**: å†…å­˜æ³„æ¼æ£€æµ‹å’Œèµ„æºä¼˜åŒ–
- **æ€§èƒ½åˆ†æ**: ç”Ÿæˆæ€§èƒ½æŠ¥å‘Šå’Œä¼˜åŒ–å»ºè®®

### ğŸ›ï¸ å¯è§†åŒ–ä»ªè¡¨æ¿
- **å®æ—¶å›¾è¡¨**: CPUã€å†…å­˜ã€ç½‘ç»œç­‰æŒ‡æ ‡çš„å®æ—¶å›¾è¡¨
- **å‘Šè­¦é¢æ¿**: æ´»åŠ¨å‘Šè­¦çš„å¯è§†åŒ–å±•ç¤º
- **æ—¥å¿—æŸ¥çœ‹å™¨**: å®æ—¶æ—¥å¿—æµå’Œå†å²æ—¥å¿—æŸ¥è¯¢
- **äº‹ä»¶æ—¶é—´çº¿**: ç³»ç»Ÿäº‹ä»¶çš„æ—¶é—´çº¿è§†å›¾

## æ¶æ„è®¾è®¡

```
ç›‘æ§ç³»ç»Ÿæ¶æ„
â”œâ”€â”€ LoggingMonitoringService (æ—¥å¿—ç›‘æ§æœåŠ¡)
â”‚   â”œâ”€â”€ æ—¥å¿—æ”¶é›†å’Œå­˜å‚¨
â”‚   â”œâ”€â”€ äº‹ä»¶è®°å½•å’Œç®¡ç†
â”‚   â””â”€â”€ æŒ‡æ ‡æ•°æ®æ”¶é›†
â”œâ”€â”€ AlertManager (å‘Šè­¦ç®¡ç†å™¨)
â”‚   â”œâ”€â”€ å‘Šè­¦è§„åˆ™å¼•æ“
â”‚   â”œâ”€â”€ é€šçŸ¥å‘é€å™¨
â”‚   â””â”€â”€ å‘Šè­¦ç”Ÿå‘½å‘¨æœŸç®¡ç†
â”œâ”€â”€ HealthChecker (å¥åº·æ£€æŸ¥å™¨)
â”‚   â”œâ”€â”€ ç»„ä»¶å¥åº·æ£€æŸ¥
â”‚   â”œâ”€â”€ è‡ªåŠ¨æ¢å¤æœºåˆ¶
â”‚   â””â”€â”€ å¥åº·æŠ¥å‘Šç”Ÿæˆ
â”œâ”€â”€ PerformanceMonitor (æ€§èƒ½ç›‘æ§å™¨)
â”‚   â”œâ”€â”€ ç³»ç»ŸæŒ‡æ ‡æ”¶é›†
â”‚   â”œâ”€â”€ æ€§èƒ½åˆ†æ
â”‚   â””â”€â”€ è‡ªåŠ¨ä¼˜åŒ–
â”œâ”€â”€ MonitoringDashboard (ç›‘æ§ä»ªè¡¨æ¿)
â”‚   â”œâ”€â”€ å®æ—¶æ•°æ®å±•ç¤º
â”‚   â”œâ”€â”€ å›¾è¡¨å’Œå¯è§†åŒ–
â”‚   â””â”€â”€ ç”¨æˆ·äº¤äº’ç•Œé¢
â””â”€â”€ MonitoringConfigManager (é…ç½®ç®¡ç†å™¨)
    â”œâ”€â”€ é…ç½®åŠ è½½å’Œä¿å­˜
    â”œâ”€â”€ é…ç½®éªŒè¯
    â””â”€â”€ åŠ¨æ€é…ç½®æ›´æ–°
```

## å¿«é€Ÿå¼€å§‹

### 1. åŸºæœ¬ä½¿ç”¨

```python
from src.monitoring import initialize_monitoring_system, get_monitoring_system
from src.core.event_bus import EventBus
from src.data.database_manager import DatabaseManager

# åˆå§‹åŒ–ä¾èµ–ç»„ä»¶
event_bus = EventBus()
db_manager = DatabaseManager()

# åˆå§‹åŒ–ç›‘æ§ç³»ç»Ÿ
monitoring_system = initialize_monitoring_system(
    event_bus=event_bus,
    db_manager=db_manager,
    config_directory="./config"
)

# å¯åŠ¨ç›‘æ§ç³»ç»Ÿ
if monitoring_system.start():
    print("ç›‘æ§ç³»ç»Ÿå¯åŠ¨æˆåŠŸ")
else:
    print("ç›‘æ§ç³»ç»Ÿå¯åŠ¨å¤±è´¥")

# è·å–å…¨å±€ç›‘æ§ç³»ç»Ÿå®ä¾‹
monitoring = get_monitoring_system()
```

### 2. æ—¥å¿—è®°å½•

```python
from src.monitoring import LogLevel

# è®°å½•ä¸åŒçº§åˆ«çš„æ—¥å¿—
monitoring.logging_service.add_log(
    level=LogLevel.INFO,
    message="ä»»åŠ¡å¼€å§‹æ‰§è¡Œ",
    source="task_manager",
    details={'task_id': 'task_001', 'task_name': 'ç¤ºä¾‹ä»»åŠ¡'}
)

monitoring.logging_service.add_log(
    level=LogLevel.ERROR,
    message="ä»»åŠ¡æ‰§è¡Œå¤±è´¥",
    source="task_manager",
    details={'task_id': 'task_001', 'error': 'ç½‘ç»œè¿æ¥è¶…æ—¶'}
)
```

### 3. äº‹ä»¶è®°å½•

```python
from src.monitoring import MonitoringEventType

# è®°å½•ç³»ç»Ÿäº‹ä»¶
monitoring.logging_service.add_event(
    event_type=MonitoringEventType.TASK_STARTED,
    message="ä»»åŠ¡å¼€å§‹æ‰§è¡Œ",
    source="task_manager",
    details={'task_id': 'task_001'}
)

monitoring.logging_service.add_event(
    event_type=MonitoringEventType.GAME_DETECTED,
    message="æ£€æµ‹åˆ°æ¸¸æˆçª—å£",
    source="game_detector",
    details={'game_name': 'å´©åï¼šæ˜Ÿç©¹é“é“'}
)
```

### 4. è‡ªå®šä¹‰å‘Šè­¦è§„åˆ™

```python
from src.monitoring import AlertSeverity, AlertChannel

# æ·»åŠ CPUä½¿ç”¨ç‡å‘Šè­¦
monitoring.alert_manager.add_rule(
    name="high_cpu_usage",
    condition="cpu_usage > 80",
    severity=AlertSeverity.WARNING,
    message="CPUä½¿ç”¨ç‡è¿‡é«˜: {cpu_usage}%",
    channels=[AlertChannel.DESKTOP, AlertChannel.LOG]
)

# æ·»åŠ ä»»åŠ¡å¤±è´¥ç‡å‘Šè­¦
monitoring.alert_manager.add_rule(
    name="high_task_failure_rate",
    condition="task_failure_rate > 0.1",
    severity=AlertSeverity.CRITICAL,
    message="ä»»åŠ¡å¤±è´¥ç‡è¿‡é«˜: {task_failure_rate:.2%}",
    channels=[AlertChannel.EMAIL, AlertChannel.DESKTOP]
)
```

### 5. å¥åº·æ£€æŸ¥

```python
from src.monitoring import ComponentType, HealthStatus
from src.monitoring.health_checker import BaseHealthCheck

# è‡ªå®šä¹‰å¥åº·æ£€æŸ¥
class CustomServiceHealthCheck(BaseHealthCheck):
    def __init__(self, service):
        super().__init__(
            name="custom_service",
            component_type=ComponentType.SERVICE,
            check_interval=30
        )
        self.service = service
    
    def _perform_check(self):
        try:
            if self.service.is_running():
                return HealthStatus.HEALTHY, "æœåŠ¡è¿è¡Œæ­£å¸¸"
            else:
                return HealthStatus.CRITICAL, "æœåŠ¡æœªè¿è¡Œ"
        except Exception as e:
            return HealthStatus.CRITICAL, f"æ£€æŸ¥å¤±è´¥: {str(e)}"

# æ·»åŠ å¥åº·æ£€æŸ¥
monitoring.health_checker.add_check(CustomServiceHealthCheck(my_service))
```

### 6. æ€§èƒ½æŒ‡æ ‡

```python
# æ›´æ–°æ€§èƒ½æŒ‡æ ‡
monitoring.logging_service.add_metrics({
    'response_time': 1.5,
    'request_count': 100,
    'error_count': 2,
    'cache_hit_rate': 0.85
})

# è·å–å½“å‰æ€§èƒ½æŒ‡æ ‡
metrics = monitoring.get_performance_metrics()
print(f"å½“å‰CPUä½¿ç”¨ç‡: {metrics['system_metrics']['cpu_usage']}%")
print(f"å½“å‰å†…å­˜ä½¿ç”¨ç‡: {metrics['system_metrics']['memory_usage']}%")
```

### 7. æ˜¾ç¤ºç›‘æ§ä»ªè¡¨æ¿

```python
# æ˜¾ç¤ºç›‘æ§ä»ªè¡¨æ¿
monitoring.show_dashboard()

# éšè—ç›‘æ§ä»ªè¡¨æ¿
monitoring.hide_dashboard()
```

## é…ç½®è¯´æ˜

ç›‘æ§ç³»ç»Ÿæ”¯æŒé€šè¿‡JSONé…ç½®æ–‡ä»¶è¿›è¡Œè¯¦ç»†é…ç½®ã€‚é…ç½®æ–‡ä»¶ä½äº `config/monitoring_config.json`ã€‚

### ä¸»è¦é…ç½®é¡¹

#### æ—¥å¿—é…ç½®
```json
{
  "logging": {
    "level": "INFO",
    "max_file_size": 10485760,
    "max_files": 10,
    "log_directory": "./logs",
    "console_output": true,
    "file_output": true
  }
}
```

#### å‘Šè­¦é…ç½®
```json
{
  "alerting": {
    "enabled": true,
    "evaluation_interval": 10,
    "max_alerts": 1000,
    "enable_grouping": true,
    "grouping_window": 300
  }
}
```

#### æ€§èƒ½ç›‘æ§é…ç½®
```json
{
  "performance": {
    "enabled": true,
    "monitoring_interval": 5,
    "enable_auto_optimization": true,
    "thresholds": {
      "cpu_warning": 70.0,
      "cpu_critical": 85.0,
      "memory_warning": 75.0,
      "memory_critical": 90.0
    }
  }
}
```

#### å¥åº·æ£€æŸ¥é…ç½®
```json
{
  "health_check": {
    "enabled": true,
    "check_interval": 30,
    "timeout": 10,
    "max_failures": 3,
    "enable_auto_recovery": true
  }
}
```

## API å‚è€ƒ

### MonitoringSystem

ä¸»è¦çš„ç›‘æ§ç³»ç»Ÿç±»ï¼Œæä¾›ç»Ÿä¸€çš„æ¥å£ã€‚

#### æ–¹æ³•

- `start() -> bool`: å¯åŠ¨ç›‘æ§ç³»ç»Ÿ
- `stop() -> bool`: åœæ­¢ç›‘æ§ç³»ç»Ÿ
- `restart() -> bool`: é‡å¯ç›‘æ§ç³»ç»Ÿ
- `get_status() -> Dict`: è·å–ç³»ç»ŸçŠ¶æ€
- `get_health_summary() -> Dict`: è·å–å¥åº·çŠ¶æ€æ‘˜è¦
- `get_alert_summary() -> Dict`: è·å–å‘Šè­¦æ‘˜è¦
- `get_performance_metrics() -> Dict`: è·å–æ€§èƒ½æŒ‡æ ‡
- `export_monitoring_data(filename: str) -> bool`: å¯¼å‡ºç›‘æ§æ•°æ®
- `show_dashboard()`: æ˜¾ç¤ºç›‘æ§ä»ªè¡¨æ¿
- `hide_dashboard()`: éšè—ç›‘æ§ä»ªè¡¨æ¿

### LoggingMonitoringService

æ—¥å¿—å’Œç›‘æ§æœåŠ¡ã€‚

#### æ–¹æ³•

- `add_log(level, message, source, details)`: æ·»åŠ æ—¥å¿—
- `add_event(event_type, message, source, details)`: æ·»åŠ äº‹ä»¶
- `add_metrics(metrics)`: æ·»åŠ æŒ‡æ ‡æ•°æ®
- `get_logs(start_time, end_time, level, source)`: è·å–æ—¥å¿—
- `get_events(start_time, end_time, event_type, source)`: è·å–äº‹ä»¶
- `get_metrics(start_time, end_time, metric_names)`: è·å–æŒ‡æ ‡

### AlertManager

å‘Šè­¦ç®¡ç†å™¨ã€‚

#### æ–¹æ³•

- `add_rule(name, condition, severity, message, channels)`: æ·»åŠ å‘Šè­¦è§„åˆ™
- `remove_rule(name)`: ç§»é™¤å‘Šè­¦è§„åˆ™
- `update_rule(name, **kwargs)`: æ›´æ–°å‘Šè­¦è§„åˆ™
- `get_active_alerts()`: è·å–æ´»åŠ¨å‘Šè­¦
- `acknowledge_alert(alert_id, user)`: ç¡®è®¤å‘Šè­¦
- `resolve_alert(alert_id, user, resolution)`: è§£å†³å‘Šè­¦

### HealthChecker

å¥åº·æ£€æŸ¥å™¨ã€‚

#### æ–¹æ³•

- `add_check(health_check)`: æ·»åŠ å¥åº·æ£€æŸ¥
- `remove_check(name)`: ç§»é™¤å¥åº·æ£€æŸ¥
- `run_check(name)`: è¿è¡ŒæŒ‡å®šæ£€æŸ¥
- `get_health_status()`: è·å–æ•´ä½“å¥åº·çŠ¶æ€
- `get_check_results(name)`: è·å–æ£€æŸ¥ç»“æœ
- `get_health_summary()`: è·å–å¥åº·æ‘˜è¦

## æœ€ä½³å®è·µ

### 1. æ—¥å¿—è®°å½•

- ä½¿ç”¨åˆé€‚çš„æ—¥å¿—çº§åˆ«
- æä¾›è¯¦ç»†çš„ä¸Šä¸‹æ–‡ä¿¡æ¯
- é¿å…è®°å½•æ•æ„Ÿä¿¡æ¯
- ä½¿ç”¨ç»“æ„åŒ–æ—¥å¿—æ ¼å¼

```python
# å¥½çš„æ—¥å¿—è®°å½•ç¤ºä¾‹
monitoring.logging_service.add_log(
    level=LogLevel.INFO,
    message="ç”¨æˆ·ç™»å½•æˆåŠŸ",
    source="auth_service",
    details={
        'user_id': user.id,
        'username': user.username,
        'ip_address': request.remote_addr,
        'user_agent': request.user_agent.string
    }
)

# é¿å…è®°å½•æ•æ„Ÿä¿¡æ¯
# é”™è¯¯ç¤ºä¾‹ï¼šä¸è¦è®°å½•å¯†ç ã€ä»¤ç‰Œç­‰æ•æ„Ÿä¿¡æ¯
```

### 2. å‘Šè­¦é…ç½®

- è®¾ç½®åˆç†çš„é˜ˆå€¼
- é¿å…å‘Šè­¦é£æš´
- ä½¿ç”¨å‘Šè­¦åˆ†ç»„å’ŒæŠ‘åˆ¶
- å®šæœŸå®¡æŸ¥å‘Šè­¦è§„åˆ™

```python
# è®¾ç½®åˆç†çš„å‘Šè­¦è§„åˆ™
monitoring.alert_manager.add_rule(
    name="database_connection_failure",
    condition="database_connection_errors > 5",
    severity=AlertSeverity.CRITICAL,
    message="æ•°æ®åº“è¿æ¥å¤±è´¥æ¬¡æ•°è¿‡å¤š",
    channels=[AlertChannel.EMAIL, AlertChannel.DESKTOP],
    cooldown=300  # 5åˆ†é’Ÿå†·å´æ—¶é—´
)
```

### 3. æ€§èƒ½ç›‘æ§

- ç›‘æ§å…³é”®æ€§èƒ½æŒ‡æ ‡
- è®¾ç½®åˆç†çš„æ€§èƒ½é˜ˆå€¼
- å¯ç”¨è‡ªåŠ¨ä¼˜åŒ–åŠŸèƒ½
- å®šæœŸåˆ†ææ€§èƒ½è¶‹åŠ¿

```python
# ç›‘æ§å…³é”®ä¸šåŠ¡æŒ‡æ ‡
monitoring.logging_service.add_metrics({
    'task_execution_time': execution_time,
    'task_success_rate': success_rate,
    'user_active_count': active_users,
    'api_response_time': response_time
})
```

### 4. å¥åº·æ£€æŸ¥

- æ£€æŸ¥å…³é”®ç»„ä»¶
- è®¾ç½®åˆé€‚çš„æ£€æŸ¥é—´éš”
- å®ç°è‡ªåŠ¨æ¢å¤æœºåˆ¶
- ç›‘æ§æ£€æŸ¥ç»“æœè¶‹åŠ¿

```python
# å®ç°è‡ªå®šä¹‰å¥åº·æ£€æŸ¥
class DatabaseHealthCheck(BaseHealthCheck):
    def _perform_check(self):
        try:
            # æ‰§è¡Œæ•°æ®åº“è¿æ¥æµ‹è¯•
            result = self.db.execute("SELECT 1")
            if result:
                return HealthStatus.HEALTHY, "æ•°æ®åº“è¿æ¥æ­£å¸¸"
            else:
                return HealthStatus.CRITICAL, "æ•°æ®åº“æŸ¥è¯¢å¤±è´¥"
        except Exception as e:
            return HealthStatus.CRITICAL, f"æ•°æ®åº“è¿æ¥å¤±è´¥: {str(e)}"
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. ç›‘æ§ç³»ç»Ÿå¯åŠ¨å¤±è´¥

**é—®é¢˜**: ç›‘æ§ç³»ç»Ÿæ— æ³•å¯åŠ¨

**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®
- ç¡®è®¤ä¾èµ–ç»„ä»¶å·²æ­£ç¡®åˆå§‹åŒ–
- æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ä¸­çš„é”™è¯¯ä¿¡æ¯
- æ£€æŸ¥æ–‡ä»¶æƒé™å’Œç›®å½•æ˜¯å¦å­˜åœ¨

#### 2. å‘Šè­¦ä¸å·¥ä½œ

**é—®é¢˜**: å‘Šè­¦è§„åˆ™ä¸è§¦å‘æˆ–é€šçŸ¥ä¸å‘é€

**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥å‘Šè­¦è§„åˆ™é…ç½®æ˜¯å¦æ­£ç¡®
- ç¡®è®¤æŒ‡æ ‡æ•°æ®æ˜¯å¦æ­£å¸¸æ›´æ–°
- æ£€æŸ¥é€šçŸ¥æ¸ é“é…ç½®
- æŸ¥çœ‹å‘Šè­¦ç®¡ç†å™¨çš„æ—¥å¿—

#### 3. æ€§èƒ½ç›‘æ§æ•°æ®ä¸å‡†ç¡®

**é—®é¢˜**: æ€§èƒ½æŒ‡æ ‡æ˜¾ç¤ºå¼‚å¸¸æˆ–ä¸æ›´æ–°

**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥æ€§èƒ½ç›‘æ§å™¨æ˜¯å¦æ­£å¸¸è¿è¡Œ
- ç¡®è®¤ç³»ç»Ÿèµ„æºç›‘æ§æƒé™
- æ£€æŸ¥ç›‘æ§é—´éš”é…ç½®
- é‡å¯æ€§èƒ½ç›‘æ§ç»„ä»¶

#### 4. å¥åº·æ£€æŸ¥å¤±è´¥

**é—®é¢˜**: å¥åº·æ£€æŸ¥æŒç»­å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥è¢«æ£€æŸ¥ç»„ä»¶çš„å®é™…çŠ¶æ€
- ç¡®è®¤å¥åº·æ£€æŸ¥é…ç½®æ­£ç¡®
- æ£€æŸ¥ç½‘ç»œè¿æ¥å’Œæƒé™
- è°ƒæ•´æ£€æŸ¥è¶…æ—¶æ—¶é—´

### è°ƒè¯•æ¨¡å¼

å¯ç”¨è°ƒè¯•æ¨¡å¼å¯ä»¥è·å¾—æ›´è¯¦ç»†çš„æ—¥å¿—ä¿¡æ¯ï¼š

```python
# åœ¨é…ç½®æ–‡ä»¶ä¸­å¯ç”¨è°ƒè¯•æ¨¡å¼
{
  "system": {
    "debug_mode": true,
    "enable_profiling": true
  }
}
```

### æ—¥å¿—åˆ†æ

ç›‘æ§ç³»ç»Ÿçš„æ—¥å¿—æ–‡ä»¶ä½äº `logs/` ç›®å½•ä¸‹ï¼š

- `monitoring.log`: ä¸»è¦ç›‘æ§æ—¥å¿—
- `alerts.log`: å‘Šè­¦ç›¸å…³æ—¥å¿—
- `health_check.log`: å¥åº·æ£€æŸ¥æ—¥å¿—
- `performance.log`: æ€§èƒ½ç›‘æ§æ—¥å¿—

## æ‰©å±•å¼€å‘

### è‡ªå®šä¹‰ç›‘æ§ç»„ä»¶

```python
from src.monitoring.base import BaseMonitoringComponent

class CustomMonitoringComponent(BaseMonitoringComponent):
    def __init__(self, config):
        super().__init__("custom_component", config)
    
    def start(self):
        # å¯åŠ¨é€»è¾‘
        pass
    
    def stop(self):
        # åœæ­¢é€»è¾‘
        pass
    
    def get_status(self):
        # è¿”å›ç»„ä»¶çŠ¶æ€
        return {'running': self.is_running}
```

### è‡ªå®šä¹‰å‘Šè­¦é€šé“

```python
from src.monitoring.alert_manager import BaseNotificationChannel

class CustomNotificationChannel(BaseNotificationChannel):
    def __init__(self, config):
        super().__init__("custom_channel", config)
    
    def send_notification(self, alert, template):
        # å®ç°è‡ªå®šä¹‰é€šçŸ¥å‘é€é€»è¾‘
        pass
```

### è‡ªå®šä¹‰å¥åº·æ£€æŸ¥

```python
from src.monitoring.health_checker import BaseHealthCheck

class CustomHealthCheck(BaseHealthCheck):
    def __init__(self, name, config):
        super().__init__(name, ComponentType.SERVICE, config.get('interval', 30))
        self.config = config
    
    def _perform_check(self):
        # å®ç°è‡ªå®šä¹‰å¥åº·æ£€æŸ¥é€»è¾‘
        try:
            # æ‰§è¡Œæ£€æŸ¥
            if check_passed:
                return HealthStatus.HEALTHY, "æ£€æŸ¥é€šè¿‡"
            else:
                return HealthStatus.WARNING, "æ£€æŸ¥è­¦å‘Š"
        except Exception as e:
            return HealthStatus.CRITICAL, f"æ£€æŸ¥å¤±è´¥: {str(e)}"
```

## ç‰ˆæœ¬å†å²

### v1.0.0 (å½“å‰ç‰ˆæœ¬)
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- åŸºç¡€ç›‘æ§åŠŸèƒ½
- æ—¥å¿—è®°å½•å’Œäº‹ä»¶ç®¡ç†
- å‘Šè­¦ç³»ç»Ÿ
- å¥åº·æ£€æŸ¥
- æ€§èƒ½ç›‘æ§
- å¯è§†åŒ–ä»ªè¡¨æ¿

## è®¸å¯è¯

æœ¬ç›‘æ§ç³»ç»Ÿéµå¾ªé¡¹ç›®çš„æ•´ä½“è®¸å¯è¯ã€‚

## è´¡çŒ®

æ¬¢è¿æäº¤é—®é¢˜æŠ¥å‘Šå’ŒåŠŸèƒ½è¯·æ±‚ã€‚åœ¨æäº¤ä»£ç ä¹‹å‰ï¼Œè¯·ç¡®ä¿ï¼š

1. ä»£ç ç¬¦åˆé¡¹ç›®çš„ç¼–ç è§„èŒƒ
2. æ·»åŠ äº†é€‚å½“çš„æµ‹è¯•ç”¨ä¾‹
3. æ›´æ–°äº†ç›¸å…³æ–‡æ¡£
4. é€šè¿‡äº†æ‰€æœ‰æµ‹è¯•

## æ”¯æŒ

å¦‚æœæ‚¨åœ¨ä½¿ç”¨ç›‘æ§ç³»ç»Ÿæ—¶é‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š

1. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„æ•…éšœæ’é™¤éƒ¨åˆ†
2. æ£€æŸ¥é¡¹ç›®çš„ Issues é¡µé¢
3. æäº¤æ–°çš„ Issue å¹¶æä¾›è¯¦ç»†ä¿¡æ¯

---

*æœ€åæ›´æ–°: 2024å¹´1æœˆ*